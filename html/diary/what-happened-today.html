<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <base href="../../">
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="img/pb16x16.ico" title="B_Pt">
    <link rel="stylesheet" type="text/css" href="js/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="js/bootstrap-3.3.7-dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="js/syntaxhighlighter/theme.css">
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <title>WHAT HAPPENED TODAY</title>
    <style>
        body {
            line-height: 25px;
        }
        .panel-my {
            border-color: #bce8f1;
        }
        .panel-my > .panel-heading {
            color: #31708f;
            background-color: #b5c8cc;
            border-color: #bce8f1;
        }
        .panel-my > .panel-heading + .panel-collapse > .panel-body {
            border-top-color: #bce8f1;
        }
        .panel-my > .panel-heading .badge {
            color: #d9edf7;
            background-color: #31708f;
        }
        .panel-my > .panel-footer + .panel-collapse > .panel-body {
            border-bottom-color: #bce8f1;
        }
    </style>
</head>
<body>
<!-- navitor -->
<div class="">
    <nav class="navbar navbar-default navbar-static-top">
        <div class="container-fluid">
            <button type="button" class="btn btn-default navbar-btn navbar-right">Home</button>
        </div>
    </nav>
</div>
<div class="container-fluid">
    <div id="catalog" class="col-lg-2"></div>
    <div class="col-lg-8">
        <div class="container-fluid">
            <ol class="breadcrumb">
                <li><a href="mainpage.html">Home</a></li>
                <li><a href="#">diary</a></li>
                <li class="active">now</li>
            </ol>
        </div>
        <div class="container">
            <div class="page-header">
                <h3>WHAT HAPPENED TODAY</h3>
                <small>now</small>
            </div>
            <div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-12-27</h3>
                    </div>
                    <div class="panel-body">
                        <h5>READ: <a href="https://adamwathan.me/css-utility-classes-and-separation-of-concerns/">CSS Utility Classes and "Separation of Concerns"</a> </h5>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-12-19</h3>
                    </div>
                    <div class="panel-body">
                        <h5>三个ThreadLocal</h5>
                        <div>
                            <p>线程共享变量： java.lang.ThreadLocal</p>
                            <p>父线程与子线程共享变量：java.lang.InheritableThreadLocal</p>
                            <p>父线程与父线程在线程池中创建的子线程共享变量：TransmittableThreadLocal</p>
                            <section>
                                <pre class="brush:java">
                                    <dependency>
                                        <groupId>com.alibaba</groupId>
                                        <artifactId>transmittable-thread-local</artifactId>
                                        <version>2.11.0</version>
                                    </dependency>
                                </pre>
                            </section>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-12-07</h3>
                    </div>
                    <div class="panel-body">
                        <h5>创业公司时间成本</h5>
                        <div>
                            <a href="http://kyleprifogle.com/dear-startup/" target="_blank">Dear Startup: You have no idea how much that costs.</a>
                            <br/>
                            <a href="/html/read/startup-You-have-no-idea-how-much-that-costs.html" target="_blank">创业公司：你不知道花多少时间解决问题</a>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-12-05</h3>
                    </div>
                    <div class="panel-body">
                        <h5>阿里云aliyun-java-sdk-core（4.4.2）设置代理服务器</h5>
                        <div>
                            媒体服务转码请求：
                            <section>
                                <pre class="brush:java">
                                    DefaultProfile profile = DefaultProfile.getProfile("cn-beijing", accesskey, secretKey);
                                    // 如果时内网环境，设置代理服务器
                                    if (needProxy) {
                                        HttpClientConfig httpClientConfig = HttpClientConfig.getDefault();
                                        httpClientConfig.setHttpProxy("http://pengbo:12345678@110.110.110.001:3128");
                                        httpClientConfig.setHttpsProxy("https://pengbo:12345678@110.110.110.001:3128");
                                        profile.setHttpClientConfig(httpClientConfig);
                                    }
                                    IAcsClient client = new DefaultAcsClient(profile);
                                    SubmitJobsRequest request = new SubmitJobsRequest();
                                    ...
                                </pre>
                            </section>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-11-19</h3>
                    </div>
                    <div class="panel-body">
                        <h5>redis模糊查询key</h5>
                        <div>
                            <h4>生产环境中不要使用keys命令</h4>
                            1、redis是单线程的，其所有操作都是原子的，不会因并发产生数据异常；
                            2、使用高耗时的Redis命令是很危险的，会占用唯一的一个线程的大量处理时间，导致所有的请求都被拖慢。（例如时间复杂度为O(N)的KEYS命令，严格禁止在生产环境中使用）；
                            <h4>单机使用scan接口获取key</h4>
                            1、scan命令的时间复杂度虽然也是O(N)，但它是分次进行的，不会阻塞线程。
                            2、scan命令提供了limit参数，可以控制每次返回结果的最大条数。
                            这两个优势就帮助我们解决了上面的难题，不过scan命令也并不是完美的，它返回的结果有可能重复，因此需要客户端去重。
                            <br/>
                            <a href="https://www.jianshu.com/p/be15dc89a3e8" target="_blank">深入理解Redis的scan命令</a>
                            <br/>
                            spring-data-redis中，注意使用完毕后及时释放连接，调用cursor.close()方法；否则将一直占用
                            <br/>
                            在集群模式下，scan接口没有作用，会报错 <code>scan is not supported across multiple nodes within a cluster</code>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-11-04</h3>
                    </div>
                    <div class="panel-body">
                        <h5>react-cookie 使用注意</h5>
                        <div>
                            低版本load(name, doNotParse )
                            经常忽略第二个参数，是否对值做JSON.parse() 当存储的是数据是纯数字的字符串，将会导致数据类型变化
                            <br/>
                            "12345678" => 12345678
                            <br/>
                            导致后面使用时出现非预期现象，如使用Number类型JSEncrypt做RSA加密时，在后台得到的是空字符串
                            <br/>
                            <section>
                                <pre class="brush:javascript">
                                    function load(name, doNotParse) {
                                      var cookies = (typeof document === 'undefined') ? _rawCookie : cookie.parse(document.cookie);
                                      var cookieVal = cookies && cookies[name];

                                      if (!doNotParse) {
                                        try {
                                          cookieVal = JSON.parse(cookieVal);
                                        } catch(e) {
                                          // Not serialized object
                                        }
                                      }

                                      return cookieVal;
                                    }
                                </pre>
                            </section>
                            高版本 get(name, [options.doNotParse]) 已作了处理，猜测value是否是序列化后的值, 而不是全由doNotParse值确定
                            <sectioin>
                                <pre class="brush:javascript">
                                    export function readCookie(value: Cookie, options: CookieGetOptions = {}) {
                                      const cleanValue = cleanupCookieValue(value);
                                      if (isParsingCookie(cleanValue, options.doNotParse)) {
                                        try {
                                          return JSON.parse(cleanValue);
                                        } catch (e) {
                                          // At least we tried
                                        }
                                      }
                                </pre>
                            </sectioin>
                            <sectioin>
                                <pre class="brush:javascript">
                                    function cleanupCookieValue(value: Cookie): Cookie {
                                      // express prepend j: before serializing a cookie
                                      if (value && value[0] === 'j' && value[1] === ':') {
                                        return value.substr(2);
                                      }

                                      return value;
                                    }
                                </pre>
                            </sectioin>
                            <sectioin>
                                <pre class="brush:javascript">
                                    export function isParsingCookie(value: Cookie, doNotParse?: boolean) {
                                      if (typeof doNotParse === 'undefined') {
                                        // We guess if the cookie start with { or [, it has been serialized
                                        doNotParse =
                                          !value || (value[0] !== '{' && value[0] !== '[' && value[0] !== '"');
                                      }

                                      return !doNotParse;
                                    }
                                </pre>
                            </sectioin>
                            <code>
                                JSON.parse("12345678") => 12345678 <br/>
                                JSON.parse("abcdefg") => 报错，返回原始字符串 <br/>
                                JSON.parse("\"abc\"") => "abc" <br/>
                            </code>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-11-01</h3>
                    </div>
                    <div class="panel-body">
                        <h5>将 JS 的正则表达式转成图形解释的在线工具</h5>
                        <div>
                            <a href="https://regexper.com/" target="_blank">regexper.com</a>
                        </div>
                        <div>
                            <a href="https://mp.weixin.qq.com/s/JcJGXSYkko5O_YAM37LBXA" target="_blank">互联网项目中mysql应该选什么事务隔离级别？</a>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-10-31</h3>
                    </div>
                    <div class="panel-body">
                        <h5>FastJson转换时的一些奇怪现象</h5>
                        <div>
                            java属性第二个字母大写，转字符串后会变小写  pId => pid <br/>
                            <a href="https://segmentfault.com/a/1190000015634321" target="_blank">fastjson转换json时，碰到的那些首字母大小写转换的坑！</a>
                        </div>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-19-29</h3>
                    </div>
                    <div class="panel-body">
                        <h5>react+antd+mobx umi项目 less文件引入</h5>
                        <code>import styles from '../less/index.less';</code>
                        <h5>使用：</h5>
                        <code>&lt;Layout className={styles.layout}></code>
                        <h5>问题：umi默认开启了webpack的ccs-loader的CSS Modules，但是当想要在less文件样式中覆盖antd的默认样式时无法生效，且原有非umi的工程迁移时，需要改造大量样式使用方式</h5>
                        <h5>解决方式：</h5>
                        <h5>1 .umirc.js文件中增加配置：<code>disableCSSModules:true,</code></h5>
                        <h5>
                            禁用webpack的CSS Modules
                        </h5>
                        <h5>
                            2.在less中使用全局样式 :global 用来覆盖antd原有样式，把非CSS Modules的写法改写成CSS Modules的写法（CSS Modules还是挺好用的）
                        </h5>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-07-24</h3>
                    </div>
                    <div class="panel-body">
                        <h5>公司重启了路由器和交换机，本机的IP地址发生了改变，导致开发的网站使用的一个外网的JS文件报
                            <code>net::ERR_CONNECTION_RESET</code>，断下网，再连回来就好了，原因待查
                        </h5>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-07-23</h3>
                    </div>
                    <div class="panel-body">
                        <h5>嗯。。页面右键“重新加载”不会处发页面unload，会触发beforeunload事件</h5>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-07-11</h3>
                    </div>
                    <div class="panel-body">
                        <h3>Java图片上传背景变黑问题</h3>
                        <p>
                            前端上传的png图片（如canvas画图），如果背景是透明的，在使用
                            <code>java.awt.Graphics#drawImage(java.awt.Image, int, int, int, int, java.awt.image.ImageObserver)</code>压缩处理时，
                            注意透明的处理，否则会出现背景变黑的情况<br/>
                            需要在正常处理中加入：
                            <sectioin>
                                <pre class="brush:java">
                                    BufferedImage to = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_INT_RGB);
                                    Graphics2D g2d = to.createGraphics();
                                    to = g2d.getDeviceConfiguration().createCompatibleImage(newWidth, newHeight, Transparency.TRANSLUCENT);
                                    g2d.dispose();
                                </pre>
                            </sectioin>
                        </code>
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-07-08</h3>
                    </div>
                    <div class="panel-body">
                        <h3>表单中使用bootstrap组件iCheck</h3>
                        <p>
                            在表单中使用时，如果调用重置表单，iCheck的显示会错乱；
                            <br/>
                            原因：使用iCheck的选中样式是由input外面包裹他的div的<code>checked</code> class样式的有无决定的，如果使用表单的reset的方法，不会影响div样式；
                            如果checkbox的初始是没有选中的，选中checkbox后，reset表单,导致input的选中状态已经是uncheck的，但是iCheck样式还是显示选中状态；
                            <br/>
                            解决办法：在reset form之前，将iCheck的input表单项使用iCheck方法重置其初始状态（但是如果绑定了check uncheck事件，可能会处发，注意业务逻辑处理）
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-07-08</h3>
                    </div>
                    <div class="panel-body">
                        <h3>Bean 属性复制</h3>
                        <p>不要使用<code>Apache BeanUtils</code>,建议使用<code>Spring BeanUtils</code> 或 <code>Cglib BeanCopier</code>
                            <br/>
                            <a href="https://mp.weixin.qq.com/s/PHdYfAWzGOLojGAeOFTCLQ">为什么阿里代码规约要求避免使用 Apache BeanUtils 进行属性复制</a>
                            <br/>
                            原因：1，性能问题 输出了大量的日志调试信息，重复的对象类型检查和类型转换；2.在进行属性拷贝时，低版本CommonsBeanUtils 为了解决Date为空的问题会导致为目标对象的原始类型的包装类属性赋予初始值，如 Integer 属性默认赋值为 0，尽管你的来源对象该字段的值为 null。
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-07-04</h3>
                    </div>
                    <div class="panel-body">
                        <h4>iframe中调用摄像头和麦克风</h4>
                        <p>
                            需要在iframe中增加allow属性<code>allow="geolocation; microphone; camera; midi; encrypted-media;"</code>
                            <br/>
                            在react中
                            <section>
                                <pre class="brush: javascript">
                                    <iframe id="mainIframe" src={this.state.currentSrc} width="100%" className="iframe_body"
                                            allow="geolocation; microphone; camera; midi; encrypted-media;"></Iframe>
                                </pre>
                                或者使用react组件react-iframe
                                <pre class="brush: javascript">
                                    import Iframe from 'react-iframe'
                                    <Iframe id="mainIframe" src={this.state.currentSrc} width="100%" className="iframe_body"
                                        allow="geolocation; microphone; camera; midi; encrypted-media;"></Iframe>
                                </pre>
                            </section>
                            但是在一些低版本react中，不支持allow属性，代码中加了打包之后allow属性会消失
                            需要其他方式设置
                            <section>
                                <pre class="brush: javascript">
                                    componentDidMount() {
                                        let iframe = window.document.getElementById("mainIframe");
                                        iframe.allow="microphone;camera;midi;encrypted-media;";
                                    }
                                </pre>
                            </section>
                        </p>
                        <p>
                            顶级window必须是https的（iframe一定得是https的，不然浏览器会报错:Mixed Content），iframe可以与顶级window是跨域的， 否则<code>window.navigator.mediaDevices</code>对象回事undefined，无法访问媒体设备;
                            <br/>
                            Mixed Content:
                            <br/>
                            https网页中，如果请求的内容属于http协议，则称为 Mixed Content，W3C 将 Mixed Content 分为 Optionally-blockable 和 Blockable，Optionally-blockable定义为：
                            <br/>
                            1.通过 &lt;img&gt; 标签加载的图片；
                            2.通过 &lt;video&gt; / &lt;audio&gt; 和 &lt;source&gt; 标签加载的视频或音频；
                            3.预读的（Prefetched）资源；
                            <br/>
                            除Optionally-blockable之外所有的 Mixed Content 都是Blockable，浏览器必须禁止加载这类资源。所以现代浏览器中，对于 HTTPS 页面中的 JavaScript、CSS，iframe等 HTTP 资源，一律不加载，直接在控制台打印错误信息
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-06-26</h3>
                    </div>
                    <div class="panel-body">
                        <h5>使用了dubbo的tomcat不能使用shutdown.sh关闭</h5>
                        <p>
                            原因：
                            <code>com.alibaba.dubbo.remoting.transport.netty.NettyClient</code>创建了<code>NioClientSocketChannelFactory</code>,
                            <code>NioClientSocketChannelFactory</code>创建了<code>NioClientBossPool</code>,
                            <code>NioClientBossPool</code>构造时创建了<code>HashedWheelTimer</code>,
                            <code>HashedWheelTimer</code>创建时使用的是<code>Executors.defaultThreadFactory()</code>，
                            这个线程工厂创建的线程是非daemon的，因此必须调用<code>NioClientSocketChannelFactory</code>的
                            <code>releaseExternalResources</code>方法才可以优雅地停止这些非daemon线程。而dubbo出于规避netty的一个bug
                            <a href="https://issues.jboss.org/browse/NETTY-424">https://issues.jboss.org/browse/NETTY-424</a>
                            所以注释掉了NettyClient里的doClose方法里的逻辑,而采用注册shutdownhook的方式进行资源的释放,但这个方案其实并不能释放Netty的资源，
                            正常关闭java进程时，因为有非daemon线程存在，所以shutdownhook并不会执行.
                            <section>
                                <pre class="brush: java">
                                    @Override
                                    protected void doClose() throws Throwable {
                                        /*try {
                                            bootstrap.releaseExternalResources();
                                        } catch (Throwable t) {
                                            logger.warn(t.getMessage());
                                        }*/
                                    }
                                </pre>
                            </section>
                            <section>
                                <pre class="brush: java">
                                    static {
                                        Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
                                            public void run() {
                                                if (logger.isInfoEnabled()) {
                                                    logger.info("Run shutdown hook of netty client now.");
                                                }
                                                try {
                                                    channelFactory.releaseExternalResources();
                                                } catch (Throwable t) {
                                                    logger.warn(t.getMessage());
                                                }
                                            }
                                        }, "DubboShutdownHook-NettyClient"));
                                    }
                                </pre>
                            </section>
                        </p>
                        <p>
                            tomcat 关闭方式
                            1.tomcat启动时，代码<code>await()</code>方法根据<code>server.xml</code>中的配置，阻塞监听关闭端口，直到有关闭消息进来；
                            <section>
                                org.apache.catalina.startup.Catalina.java
                                <pre class="brush:java">
                                    if (await) {
                                        await();
                                        stop();
                                    }
                                </pre>
                            </section>
                            2.shutdown.sh 调用<code>org.apache.catalina.startup.Bootstrap</code><code>main</code>方法，
                            反射调用<code>org.apache.catalina.startup.Catalina</code>的<code>stopServer</code>方法,
                            <code>stopServer</code>方法根据<code>server.xml</code>中的配置，
                            <section>
                                <pre class="brush:xml">
                                    <Server port="8005" shutdown="SHUTDOWN">
                                        ...
                                    </Server>
                                </pre>
                            </section>
                            找到配置的端口<code>8005</code>，向这个端口发送配置的字符串<code>SHUTDOWN</code>"
                            <br/><br/>
                            3.<code>await()</code>方法监听到有数据到来，并且是配置的<code>SHUTDOWN</code>,则<code>await</code>方法成功返回，并执行<code>stop()</code>和
                            注册的ShutdownHooks，成功退出。
                            <br/><br/>
                            4.tomcat自己创建的线程都是守护线程<code>pollerThread.setDaemon(true);</code>
                            <section>
                                <pre class="brush:java">
                                    // Start poller threads
                                    pollers = new Poller[pollerThreadCount];
                                    for (int i = 0; i < pollerThreadCount; i++) {
                                        pollers[i] = new Poller(false);
                                        pollers[i].init();
                                        Thread pollerThread = new Thread(pollers[i], getName() + "-Poller-" + i);
                                        pollerThread.setPriority(threadPriority);
                                        pollerThread.setDaemon(true);
                                        pollerThread.start();
                                    }
                                </pre>
                            </section>
                        </p>
                        <h3>SO,web项目中慎用Executors以及非守护线程, 使用Executors时要自定义线程创建工厂类</h3>
                        <br/>
                        <h5>关于<code>server.xml</code>中的AJP协议的端口监听</h5>
                        <section>
                            <pre class="brush: xml">
                                <Connector port="8009" protocol="AJP/1.3" redirectPort="8443">
                                    ....
                                </Connector>
                            </pre>
                        </section>
                        <p>
                            "ajp13是一个二进制的TCP传输协议，相比HTTP这种纯文本的协议来说，效率和性能更高，也做了很多优化。显然，浏览器并不能直接支持AJP13协议，
                            只支持HTTP协议。所以实际情况是，通过Apache的proxy_ajp模块进行反向代理，暴露成http协议给客户端访问。
                            <br/>
                            其他支持AJP协议的代理服务器当然也可以用这种做法。但是实际情况是，支持AJP代理的服务器非常少，比如目前很火爆的Nginx就没这个模块 (默认没有这种模块，有用户自己实现的模块)。
                            因此tomcat的配置大部分都是关闭AJP协议端口的， 因为除了Apache之外别的http server几乎都不能反代AJP13协议，自然就没太大用处了。"
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-06-20</h3>
                    </div>
                    <div class="panel-body">
                        <h5>log4j2日志：开发环境正常，服务器上不输出</h5>
                        <p>
                            参考链接：<a target="_blank" href="https://www.cnblogs.com/zeng1994/p/df2559e6dc66c99065676e0ee70545eb.html">记一次项目上线后Log4j2不输出日志的坑</a>
                        </p>
                        <p>防链接丢失，简要记录</p>
                        <p>
                            1.查看日志：<code>Class path contains multiple SLF4J bindings.</code><br/>
                            maven依赖中有两个对日志实现的桥接包 <code>slf4j-log4j12-1.7.22.jar</code>（log4j），<code>log4j-slf4j-impl-2.6.6.jar</code> （log4j2）
                            <br/><br/>
                            2.官方资料发现slf4j在绑定时，如果有多个可以绑定的包，SLF4J选择绑定的方式由JVM确定，并且出于所有实际目的应该被认为是随机的。
                            <br/>
                            <code>slf4j-api.1.7.21.jar</code> 中的<code>LoggerFactory.java</code>
                            <section>
                                <pre class="brush: java">
                                    import org.slf4j.helpers.SubstituteLoggerFactory;
                                    import org.slf4j.helpers.Util;
                                    import org.slf4j.impl.StaticLoggerBinder; // 此行 import的是桥接包中的类，由JVM选择
                                    ...
                                    // 绑定方法
                                    private final static void bind() {
                                        try {
                                            Set&gt;URL> staticLoggerBinderPathSet = null;
                                            // skip check under android, see also
                                            // http://jira.qos.ch/browse/SLF4J-328
                                            if (!isAndroid()) {
                                                staticLoggerBinderPathSet = findPossibleStaticLoggerBinderPathSet();
                                                reportMultipleBindingAmbiguity(staticLoggerBinderPathSet);
                                            }
                                            // the next line does the binding
                                            StaticLoggerBinder.getSingleton(); // 桥接包的类在此使用
                                            INITIALIZATION_STATE = SUCCESSFUL_INITIALIZATION;
                                            reportActualBinding(staticLoggerBinderPathSet);
                                            fixSubstituteLoggers();
                                            replayEvents();
                                            // release all resources in SUBST_FACTORY
                                            SUBST_FACTORY.clear();
                                </pre>
                            </section>
                            3.所以可能开发时，JVM选择了<code>log4j-slf4j-impl</code>， 服务器上选择了<code>slf4j-log4j12</code>，导致没有日志输出和报错
                            <br/><br/>
                            4.使用<code>dependency:tree</code> 命令查看多余的依赖并删除
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-06-19</h3>
                    </div>
                    <div class="panel-body">
                        <h5>java 8:java.library.path  dll 和 so 该放在哪里</h5>
                        默认情况下：System.getProperty("java.library.path");
                        <div style="margin-left: 10px">
                            <p>1.windows 10:
                                = %PATH%
                            </p>
                            <p>2.linux:
                                <section>
                                <pre class="brush: shell">
                                    =$LD_LIBRARY_PATH:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
                                </pre>
                                </section>
                            <p>3.mac 10.14
                                <section>
                                <pre class="brush: shell">
                                     =$JAVA_LIBRARY_PATH:~/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
                                </pre>
                                </section>
                                <br>
                                <span style="font-size: 12px;color: red;">DYLD_LIBRARY_PATH 和 LD_LIBRARY_PATH 将会被忽略 </span>
                            </p>
                        </div>
                        <br>
                        <p>
                            如果指定了JVM参数，-Djava.library.path 将会覆盖默认值, 结果将是你设定的值
                        </p>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-06-01</h3>
                    </div>
                    <div class="panel-body">
                        <h5>“疼痛是一个了不起的老师，但前提是它必须很尖锐。慢性疼痛会劫持你的反应、你的想法、你的人际关系以及你的生产力，并让它们都变得畸形。慢性疼痛的可怕之处是，你会变得习惯它们。”</h5>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-05-27</h3>
                    </div>
                    <div class="panel-body">
                        <h5>async/await如何不用try...catch处理异常</h5>
                        <a href="https://blog.grossman.io/how-to-write-async-await-without-try-catch-blocks-in-javascript/">How to write async await without try-catch blocks in Javascript</a>
                        <br />
                        <a href="https://github.com/scopsy/await-to-js">https://github.com/scopsy/await-to-js</a>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-05-20</h3>
                    </div>
                    <div class="panel-body">
                        <h5>BigDecimal等值比较不能用equals, 要用compareTo...</h5>
                        <span>用equals方法不仅会比较值的大小，还会比较两个对象的精确度，而compareTo方法则不会比较精确度，只比较数值的大小</span>
                    </div>
                </div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-05-15</h3>
                    </div>
                    <div class="panel-body">
                        <h5>LeBlanc Rule:Later equals never</h5>
                    </div>
                </div>
				<div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-05-14</h3>
                    </div>
                    <div class="panel-body">
                        <h5>"有脾气是本能，控制住脾气是本事"</h5>
                    </div>
				</div>
                <div class="panel panel-my">
                    <div class="panel-heading">
                        <h3 class="panel-title">2019-05-13</h3>
                    </div>
                    <div class="panel-body">
                        <h5>JS取深度对象中的值</h5>
                        <a href="https://www.jianshu.com/p/77ce60122346">https://www.jianshu.com/p/77ce60122346</a>
                        <br/>
                        <a href="https://segmentfault.com/q/1010000016285893">https://segmentfault.com/q/1010000016285893</a>
                        <p>几种方式</p>
                        <ul>
                            <li>
                                1.可选运算符-<a href="https://github.com/tc39/proposal-optional-chaining">TC39/proposal-optional-chaining</a>
                            </li>
                            <li>
                                2.try...catch
                            </li>
                            <li>
                                3.<a href="https://lodash.com/docs/4.17.11#get">lodash _.get</a>
                            </li>
                            <li>
                                4.利用reduce
                            </li>
                            <li>
                                5.ES6 Proxy
                            </li>
                        </ul>
                        <p>可选运算符最方便，但不一定能用；还是lodash的调用方便些</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">

</div>
<div class="container">
    <div class="footer text-center">
        <hr style="height:1px;border:none;border-top:1px solid #555555;" />
        <em>The world is so interesting</em>
    </div>
</div>
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="js/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/syntaxhighlighter/syntaxhighlighter.js"></script>
</body>
</html>
